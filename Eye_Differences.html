<style>
    body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        padding: 20px;
        background-color: #f0f0f0;
    }
    .container {
        background-color: white;
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
        color: #333;
    }
    .number, .index {
        display: inline-block;
        margin: 2px;
        padding: 2px 5px;
        border-radius: 3px;
        width: 24px;
        text-align: center;
    }
    .index {
        background-color: #e0e0e0;
        font-size: 0.8em;
        cursor: pointer;
    }
    .adjacent {
        background-color: #4CAF50; /* Darker green */
    }
    .separated {
        background-color: #FF4136; /* Darker red */
    }
    .separated-2 {
        background-color: #3498db; /* Blue */
    }
    .separated-3 {
        background-color: #f1c40f; /* Yellow */
    }
    .toggle-container {
        margin-bottom: 20px;
    }
    .toggle-btn {
        margin-right: 10px;
        padding: 5px 10px;
        cursor: pointer;
    }
    .active {
        font-weight: bold;
    }
    .string-container {
        margin-bottom: 20px;
    }
    .highlighted {
        outline: 2px solid black;
    }
</style>

<div class="container">
    <h1>Eye Differences</h1>
    
    <div class="toggle-container">
        <label for="difference-input">Difference Amount:</label>
        <input type="number" id="difference-input" value="1" min="1" max="99">
        <button class="toggle-btn active" data-class="adjacent">Green</button>
        <button class="toggle-btn active" data-class="separated">Red</button>
        <button class="toggle-btn active" data-class="separated-2">Blue</button>
        <button class="toggle-btn active" data-class="separated-3">Yellow</button>
    </div>
    
    <ul>
        <li>Green: Adjacent numbers with the specified difference</li>
        <li>Red: Numbers with the specified difference, separated by one number</li>
        <li>Blue: Numbers with the specified difference, separated by two numbers</li>
        <li>Yellow: Numbers with the specified difference, separated by three numbers</li>
    </ul>
    
    <div id="output" style="overflow-x: auto; white-space: nowrap;">
    </div>
    
    <h2>Summary of Highlighted and Non-Highlighted Numbers</h2>
    <div id="summary">
        <p>Loading summary...</p>
    </div>
</div>

<script>
const strings = [
    "50,66,5,48,62,13,75,29,24,61,42,70,66,62,32,14,81,8,15,78,2,29,13,49,1,80,82,40,63,81,21,19,0,40,51,65,26,14,21,70,47,44,48,42,19,48,13,47,19,49,72,31,5,24,3,43,59,67,33,49,41,60,21,26,30,5,25,20,71,11,74,56,4,74,19,71,4,51,41,43,80,72,54,63,79,81,15,16,44,31,30,12,33,57,28,13,64,43,48",
    "80,66,5,48,62,13,75,29,24,61,42,70,66,62,32,14,81,8,15,78,2,29,13,49,1,29,11,30,52,81,21,19,0,25,26,54,20,14,21,70,47,44,48,42,19,48,13,47,19,49,44,26,59,77,64,43,79,28,72,64,1,30,73,23,67,6,33,25,64,81,68,46,17,36,13,17,21,68,13,9,46,67,57,34,62,82,15,10,73,62,2,11,65,72,37,44,10,43,68,62,9,34,18",
    "36,66,5,48,62,13,75,29,24,61,42,70,66,62,32,14,81,8,15,78,2,29,13,49,1,69,76,52,9,48,66,80,22,64,57,40,49,78,3,16,56,19,47,40,80,6,13,64,29,49,64,63,6,49,31,13,16,10,45,24,26,77,10,60,81,61,34,54,70,21,15,4,66,77,42,37,30,22,0,11,41,72,57,20,23,57,65,41,23,18,72,42,5,3,26,78,8,5,54,45,77,25,64,61,16,44,54,51,20,63,25,11,26,45,53,60,38,34",
    "76,66,5,49,75,54,69,46,32,1,42,60,26,48,50,80,32,24,55,61,47,12,21,12,49,54,34,25,36,15,56,55,20,9,8,62,13,82,9,44,29,60,53,82,42,80,5,43,71,3,80,77,47,78,34,25,62,18,10,49,62,64,52,81,11,66,62,13,47,17,52,70,26,23,32,31,64,23,35,32,50,6,1,25,8,37,47,43,26,76,65,68,80,17,7,45,63,14,53,63,60,16",
    "63,66,5,49,75,54,2,60,29,40,78,47,60,75,67,71,60,2,65,7,47,14,45,74,59,41,80,13,60,13,81,22,35,50,40,39,2,59,48,31,76,2,80,75,1,56,67,11,21,8,40,65,45,75,55,39,60,42,13,3,22,57,2,6,58,9,70,1,58,56,63,68,25,79,7,20,19,64,2,66,73,30,71,16,12,30,65,37,20,13,22,63,18,46,64,59,41,81,82,22,78,36,47,17,4,6,17,5,36,79,63,1,64,69,15,43,4,58,56,31,14,64,58,18,44,78,69,1,0,46,20,71,73,25,35,8,24",
    "34,66,5,49,75,54,23,74,11,13,28,26,19,48,67,57,37,60,34,28,74,10,17,32,11,18,19,43,19,81,42,4,62,9,46,49,32,51,76,58,4,43,47,17,67,79,21,32,44,16,30,37,26,28,41,68,57,34,51,10,69,70,8,6,46,43,18,39,47,43,15,13,33,30,35,62,37,0,37,5,38,55,37,13,40,25,9,21,11,64,5,79,42,68,11,71,11,48,3,67,61,40,22,14,35,50,61,39,11,2,66,49,51,53,17,73,36,75,74,54,24,30,54,70",
    "27,66,5,49,75,54,2,60,29,40,2,55,9,15,59,18,68,3,36,5,47,77,44,38,1,18,28,76,4,34,60,63,58,80,17,54,79,75,48,54,55,19,62,64,14,47,51,70,75,5,11,47,45,58,68,69,79,25,38,45,73,47,68,50,34,45,78,26,79,57,4,56,22,60,18,75,43,60,59,67,63,42,49,33,40,65,79,77,7,3,26,62,31,78,26,57,69,40,4,23,26,13,67,42,38,72,11,39,65,60,25,6,80,66,68,77,59,78,19",
    "77,66,5,49,75,54,2,60,29,40,2,55,9,15,59,18,68,3,36,5,47,60,21,80,1,72,55,16,82,35,57,19,1,66,18,27,39,17,74,81,39,14,78,0,25,65,43,66,64,38,81,23,24,50,57,30,71,75,26,68,54,57,56,50,71,73,14,21,8,32,26,63,5,37,19,43,66,47,53,34,66,23,73,31,54,38,77,67,11,63,79,6,22,21,51,69,74,21,5,17,67,37,29,21,60,14,82,44,30,4,20,42,35,1,31,54,46,20,40,30",
    "33,66,5,49,75,54,2,60,29,40,2,55,9,15,59,18,68,3,36,5,47,33,21,59,44,18,28,76,59,34,60,63,79,27,12,54,5,49,48,54,55,52,62,72,69,10,57,22,58,48,67,53,7,34,32,30,31,19,26,8,34,46,7,30,71,55,34,75,54,9,6,60,5,23,25,45,42,80,25,12,22,76,20,51,62,21,40,9,41,10,44,73,8,33,70,73,6,31,21,72,5,40,61,51,42,66,64,74,61,25,63,42,24,41"
];

const stringNames = ["E1", "W1", "E2", "W2", "E3", "W3", "E4", "W4", "E5"];

const activeClasses = {
    'adjacent': true,
    'separated': true,
    'separated-2': true,
    'separated-3': true
};

let differenceAmount = 1;

function highlightNumbers(numbers) {
    let result = [];
    for (let i = 0; i < numbers.length; i++) {
        let currentNum = parseInt(numbers[i]);
        let prevNum = i > 0 ? parseInt(numbers[i - 1]) : null;
        let nextNum = i < numbers.length - 1 ? parseInt(numbers[i + 1]) : null;
        let prev2Num = i > 1 ? parseInt(numbers[i - 2]) : null;
        let next2Num = i < numbers.length - 2 ? parseInt(numbers[i + 2]) : null;
        let prev3Num = i > 2 ? parseInt(numbers[i - 3]) : null;
        let next3Num = i < numbers.length - 3 ? parseInt(numbers[i + 3]) : null;

        let classes = [];

        if (activeClasses['adjacent'] && ((prevNum !== null && Math.abs(currentNum - prevNum) === differenceAmount) || 
            (nextNum !== null && Math.abs(currentNum - nextNum) === differenceAmount))) {
            classes.push('adjacent');
        }
        if (activeClasses['separated'] && ((prev2Num !== null && Math.abs(currentNum - prev2Num) === differenceAmount) ||
            (next2Num !== null && Math.abs(currentNum - next2Num) === differenceAmount))) {
            classes.push('separated');
        }
        if (activeClasses['separated-2'] && ((prev3Num !== null && Math.abs(currentNum - prev3Num) === differenceAmount) ||
            (next3Num !== null && Math.abs(currentNum - next3Num) === differenceAmount))) {
            classes.push('separated-2');
        }
        if (activeClasses['separated-3'] && ((i > 3 && Math.abs(currentNum - parseInt(numbers[i - 4])) === differenceAmount) ||
            (i < numbers.length - 4 && Math.abs(currentNum - parseInt(numbers[i + 4])) === differenceAmount))) {
            classes.push('separated-3');
        }

        if (classes.length > 0) {
            if (classes.length === 1) {
                result.push(`<span class="number ${classes[0]}" data-index="${i+1}">${currentNum.toString().padStart(2, '0')}</span>`);
            } else {
                let gradientColors = classes.map(cls => {
                    switch(cls) {
                        case 'adjacent': return '#4CAF50';
                        case 'separated': return '#FF4136';
                        case 'separated-2': return '#3498db';
                        case 'separated-3': return '#f1c40f';
                    }
                });
                let gradient = `linear-gradient(to right, ${gradientColors.join(', ')})`;
                result.push(`<span class="number" style="background-image: ${gradient};" data-index="${i+1}">${currentNum.toString().padStart(2, '0')}</span>`);
            }
        } else {
            result.push(`<span class="number" data-index="${i+1}">${currentNum.toString().padStart(2, '0')}</span>`);
        }
    }
    return result.join('');
}

function createPositionIndex(length) {
    let index = [];
    for (let i = 1; i <= length; i++) {
        if (i < 100) {
            index.push(`<span class="index" data-index="${i}">${i.toString().padStart(2, '0')}</span>`);
        } else {
            index.push(`<span class="index" data-index="${i}">${(i % 100).toString().padStart(2, '0')}</span>`);
        }
    }
    return index.join('');
}

function updateDisplay() {
    const outputDiv = document.getElementById('output');
    outputDiv.innerHTML = ''; // Clear previous content

    let maxLength = Math.max(...strings.map(str => str.split(',').length));
    let positionIndex = createPositionIndex(maxLength);

    outputDiv.innerHTML += `<div class="string-container"><h2>Position Index</h2><div>${positionIndex}</div></div>`;

    strings.forEach((str, index) => {
        const numbers = str.split(',');
        const highlightedNumbers = highlightNumbers(numbers);
        outputDiv.innerHTML += `<div class="string-container"><h2>${stringNames[index]}</h2><div>${highlightedNumbers}</div></div>`;
    });

    generateSummary();
    addHoverEffect();
}

function generateSummary() {
    const allNumbers = new Set();
    const highlightedNumbers = new Set();

    strings.forEach(str => {
        const numbers = str.split(',').map(num => parseInt(num));
        numbers.forEach((num, i) => {
            allNumbers.add(num);
            for (let j = Math.max(0, i - 4); j <= Math.min(numbers.length - 1, i + 4); j++) {
                if (i !== j && Math.abs(numbers[i] - numbers[j]) === differenceAmount) {
                    const diff = Math.abs(i - j);
                    if ((diff === 1 && activeClasses['adjacent']) ||
                        (diff === 2 && activeClasses['separated']) ||
                        (diff === 3 && activeClasses['separated-2']) ||
                        (diff === 4 && activeClasses['separated-3'])) {
                        highlightedNumbers.add(num);
                        break;
                    }
                }
            }
        });
    });

    const nonHighlightedNumbers = [...allNumbers].filter(num => !highlightedNumbers.has(num));

    const summaryDiv = document.getElementById('summary');
    summaryDiv.innerHTML = `
        <h3>Highlighted Numbers:</h3>
        <p>${[...highlightedNumbers].sort((a, b) => a - b).join(', ')}</p>
        <h3>Non-Highlighted Numbers:</h3>
        <p>${nonHighlightedNumbers.sort((a, b) => a - b).join(', ')}</p>
    `;
}

function addHoverEffect() {
    const indexes = document.querySelectorAll('.index');
    indexes.forEach(index => {
        index.addEventListener('mouseenter', function() {
            const dataIndex = this.getAttribute('data-index');
            document.querySelectorAll(`.number[data-index="${dataIndex}"]`).forEach(num => {
                num.classList.add('highlighted');
            });
        });
        index.addEventListener('mouseleave', function() {
            const dataIndex = this.getAttribute('data-index');
            document.querySelectorAll(`.number[data-index="${dataIndex}"]`).forEach(num => {
                num.classList.remove('highlighted');
            });
        });
    });
}

document.querySelectorAll('.toggle-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const className = this.getAttribute('data-class');
        activeClasses[className] = !activeClasses[className];
        this.classList.toggle('active');
        updateDisplay();
    });
});

document.getElementById('difference-input').addEventListener('input', function() {
    differenceAmount = parseInt(this.value) || 1;
    updateDisplay();
});

// Initial display
updateDisplay();
</script>

</body></html>